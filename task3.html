<!DOCTYPE>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset = utf-8">
</head>
<style>
.textarea {
	float:left;
	padding:5px;
	margin:5px;
	border:1px solid black;
	width: 100px;
	height: 150px;
	overflow:scroll;
}
.form {
	display: inline-block;
	padding:5px;
	margin:5px;
}
div >button {
	width:35px;
}
.buttons {
	float:left;
	margin:5px;
	//width:40px;
}
#t2:after {
	clear:both;
}
tr td:hover {
	background-color: #aaaaff;
}
.yellow {
	background-color:yellow;
}

</style>
<body onload='onl()'>
	<div class="form">
		<div  class="textarea">

		</div>
		<div class="buttons"><div><button name="allToRight">>></button></div><div><button name="toRight">></button></div><div><button name="toLeft"><</button></div><div><button name="allToLeft"><<</button></div>
	</div>
	<div class="textarea" id="t2">
	</div>
</div>
<script>
	let arr1 =['Option1','Option2','Option3','Option4','Option5','Option6','Option7'];
	let textarea1 = document.getElementsByClassName('textarea')[0];
	let textarea2 = document.getElementsByClassName('textarea')[1];
	let buttons = document.getElementsByClassName('buttons')[0];
	buttons.addEventListener('click',buttonListener);

	function onl(){
		let tab1 = document.createElement('table');
		arr1.forEach(function(i){tab1.innerHTML = tab1.innerHTML+"<tr><td>"+i+"</td></tr>";});
		textarea1.appendChild(tab1);
		let tab2 = document.createElement('table');
		textarea2.appendChild(tab2);
	};

	textarea1.addEventListener('click', delegate);
	textarea2.addEventListener('click', delegate);
	function delegate(e){
		if (e.target.tagName == "TD") {
			e.target.classList.toggle("yellow");
		}
	}


	function buttonListener(e){
		if (e.target.name == "toRight") {
			let elemsLeft = textarea1.childNodes[1].tBodies;
			let elemsRight = textarea2.childNodes[1];
			checkSelect(elemsLeft);	
			replace(elemsLeft,elemsRight);
		};
		if (e.target.name == "toLeft") {
			let elemsRight = textarea2.childNodes[1].tBodies;
			let elemsLeft = textarea1.childNodes[1];	
			checkSelect(elemsRight);
			replace(elemsRight,elemsLeft);
		};
		if (e.target.name == "allToRight") {
			let elemsLeft = textarea1.childNodes[1].tBodies;
			let elemsRight = textarea2.childNodes[1];	
			replaceAll(elemsLeft,elemsRight);
		};
		if (e.target.name == "allToLeft") {
			let elemsRight = textarea2.childNodes[1].tBodies;
			let elemsLeft = textarea1.childNodes[1];	
			replaceAll(elemsRight,elemsLeft);			
		};
	};

	function replace(from, to) {
		for (i=0;i<from.length;i++){
			if (from[i].childNodes[0].childNodes[0].className=="yellow") {
				from[i].childNodes[0].childNodes[0].classList.toggle("yellow");
				to.appendChild(from[i]); 
				i--;
			}
		}	
	}
	function replaceAll(from, to) {
		for (i=0;i<from.length;i++){
			from[i].childNodes[0].childNodes[0].classList.remove("yellow");
			to.appendChild(from[i]); 
			i--;
		}	
	}
	function checkSelect(where){
		for (i=0;i<where.length;i++){
			if (where[i].childNodes[0].childNodes[0].className=="yellow") {
				return;
			}
		}
		alert('select at least one option');
	}
</script>
</body>
</html>

